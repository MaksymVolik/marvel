"use strict";(self.webpackChunkmarvel=self.webpackChunkmarvel||[]).push([[20],{9215:function(e,n,t){var r=t(5671),a=t(3144),c=t(136),s=t(7277),i=t(2791),o=t(5609),l=t(184),u=function(e){(0,c.Z)(t,e);var n=(0,s.Z)(t);function t(){var e;(0,r.Z)(this,t);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=n.call.apply(n,[this].concat(c))).state={hasError:!1},e}return(0,a.Z)(t,[{key:"componentDidCatch",value:function(e,n){console.log(e,n)}},{key:"render",value:function(){return this.state.hasError?(0,l.jsx)(o.Z,{}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}]),t}(i.Component);n.Z=u},5609:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t.p+"static/media/error.42292aa12b6bc303ce99.gif",a=t(184),c=function(){return(0,a.jsx)("img",{style:{display:"block",width:"250px",height:"250px",objectFit:"contain",margin:"0 auto"},src:r,alt:"Error message"})}},9583:function(e,n,t){t.r(n),t.d(n,{Component:function(){return w}});var r=t(9439),a=t(2791),c=t(4270),s=t(8684),i=t(5609),o=t(4304),l=t(184),u=function(e){var n=e.char,t=n.name,r=n.description,a=n.thumbnail,c=n.homepage,s=n.wiki,i=-1!==a.lastIndexOf("image_not_available")?{objectFit:"contain"}:{objectFit:"cover"};return(0,l.jsxs)("div",{className:"rendom-char__block block",children:[(0,l.jsx)("div",{className:"block__image",children:(0,l.jsx)("img",{style:i,src:a,alt:"random character"})}),(0,l.jsxs)("div",{className:"block__descr",children:[(0,l.jsx)("h2",{className:"block__title",children:t}),(0,l.jsx)("div",{className:"block__text",children:r}),(0,l.jsxs)("div",{className:"block__button",children:[(0,l.jsx)("a",{href:c,className:"block__btn button button_main-color",children:"HOMEPAGE"}),(0,l.jsx)("a",{href:s,className:"block__btn button button_grey",children:"WIKI"})]})]})]})},h=function(){var e=(0,a.useState)(null),n=(0,r.Z)(e,2),t=n[0],c=n[1],h=(0,o.Z)(),d=h.loading,m=h.error,f=h.clearError,p=h.getCharacter;(0,a.useEffect)((function(){v()}),[]);var x=function(e){c(e)},v=function(){f();var e=Math.floor(400*Math.random()+1011e3);p(e).then(x)},b=d?(0,l.jsx)(s.Z,{}):null,_=m?(0,l.jsx)(i.Z,{}):null,j=d||m||!t?null:(0,l.jsx)(u,{char:t});return(0,l.jsxs)("div",{className:"random-char",children:[b,_,j,(0,l.jsxs)("div",{className:"rendom-char__cta-block cta-block",children:[(0,l.jsxs)("div",{className:"cta-block__text",children:[(0,l.jsx)("div",{children:"Random character for today!"}),(0,l.jsx)("div",{children:"Do you want to get to know him better?"}),(0,l.jsx)("div",{children:"Or choose another one"})]}),(0,l.jsx)("div",{className:"cta-block__button",children:(0,l.jsx)("button",{onClick:v,className:"cta-block__btn button button_main-color",children:"TRY IT"})})]})]})},d=t(3433),m=t(6983),f=t(5660),p=function(e){var n=(0,a.useState)([]),t=(0,r.Z)(n,2),c=t[0],u=t[1],h=(0,a.useState)(210),p=(0,r.Z)(h,2),x=p[0],v=p[1],b=(0,a.useState)(!1),_=(0,r.Z)(b,2),j=_[0],g=_[1],N=(0,a.useState)(!1),k=(0,r.Z)(N,2),Z=k[0],y=k[1],w=e.charId,C=e.onCharSelected,E=(0,o.Z)(),I=E.loading,S=E.error,F=E.getAllCharacters;(0,a.useEffect)((function(){return T(),window.addEventListener("scroll",O),function(){window.removeEventListener("scroll",O)}}),[]),(0,a.useEffect)((function(){j&&!Z&&T()}),[j]);var O=function(){window.innerHeight+window.scrollY-100>=document.body.offsetHeight&&g(!0)},T=function(){F(x).then(R).finally((function(){return g(!1)}))},R=function(e){u((function(n){return[].concat((0,d.Z)(n),(0,d.Z)(e))})),v((function(e){return e+9})),y(e.length<9)};var A=function(e){var n=e.map((function(e){var n=-1!==e.thumbnail.lastIndexOf("image_not_available")?{objectFit:"unset"}:{objectFit:"cover"},t=w===e.id?"char-list__item_selected":"",r=(0,a.createRef)(null);return(0,l.jsx)(m.Z,{nodeRef:r,timeout:500,classNames:"char-list__item",children:(0,l.jsxs)("li",{ref:r,tabIndex:0,onClick:function(){return C(e.id)},onKeyDown:function(n){" "!==n.key&&"Enter"!==n.key||(n.preventDefault(),C(e.id))},className:"char-list__item ".concat(t),children:[(0,l.jsx)("div",{className:"char-list__image",children:(0,l.jsx)("img",{style:n,src:e.thumbnail,alt:e.name})}),(0,l.jsx)("div",{className:"char-list__name",children:e.name})]})},e.id)}));return(0,l.jsx)("ul",{className:"char-list__box",children:(0,l.jsx)(f.Z,{component:null,children:n})})}(c),M=I&&!j?(0,l.jsx)(s.Z,{}):null,D=S?(0,l.jsx)(i.Z,{}):null;return(0,l.jsxs)("div",{className:"char-list",children:[M,D,A,(0,l.jsx)("button",{className:"char-list__btn button button_main-color button_long",disabled:j,style:{display:Z?"none":"block"},onClick:function(){return g(!0)},children:"LOAD MORE"})]})},x=t(1087),v=function(){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{className:"char__select",children:"Please select a character to see information"}),(0,l.jsxs)("div",{className:"skeleton",children:[(0,l.jsxs)("div",{className:"pulse skeleton__header",children:[(0,l.jsx)("div",{className:"pulse skeleton__circle"}),(0,l.jsx)("div",{className:"pulse skeleton__mini"})]}),(0,l.jsx)("div",{className:"pulse skeleton__block"}),(0,l.jsx)("div",{className:"pulse skeleton__block"}),(0,l.jsx)("div",{className:"pulse skeleton__block"})]})]})},b=function(e){var n=e.char,t=n.name,r=n.description,c=n.thumbnail,s=n.homepage,i=n.wiki,o=n.comics,u=-1!==c.lastIndexOf("image_not_available")?{objectFit:"contain"}:{objectFit:"cover"},h=(0,a.useRef)(null),d="The list of comics is missing for the selected character";return 0!==o.length&&(d=o.slice(10).map((function(e,n){return(0,l.jsx)("li",{className:"char-info__comic-book-title",children:(0,l.jsx)(x.rU,{to:"/comics/".concat(e.resourceURI.slice(e.resourceURI.lastIndexOf("/")+1)),children:e.name})},n)}))),(0,l.jsx)(m.Z,{nodeRef:h,in:!0,timeout:500,classNames:"char-info",appear:!0,children:(0,l.jsxs)("div",{ref:h,children:[(0,l.jsxs)("div",{className:"char-info__character",children:[(0,l.jsx)("div",{className:"char-info__image",children:(0,l.jsx)("img",{style:u,src:c,alt:t})}),(0,l.jsxs)("div",{className:"char-info__wraper",children:[(0,l.jsx)("h2",{className:"char-info__title",children:t}),(0,l.jsx)("a",{href:s,className:"char-info__btn button button_main-color",children:"HOMEPAGE"}),(0,l.jsx)("a",{href:i,className:"char-info__btn button button_grey",children:"WIKI"})]})]}),(0,l.jsx)("div",{className:"char-info__descr",children:r}),(0,l.jsxs)("div",{className:"char-info__comics",children:[(0,l.jsx)("h3",{className:"char-info__subtitle",children:"Comics:"}),(0,l.jsx)("ul",{className:"char-info__list",children:d})]})]})})},_=function(e){var n=(0,a.useState)(null),t=(0,r.Z)(n,2),c=t[0],u=t[1],h=(0,o.Z)(),d=h.loading,m=h.error,f=h.clearError,p=h.getCharacter;(0,a.useEffect)((function(){x()}),[e.charId]);var x=function(){var n=e.charId;n&&(f(),p(n).then(_))},_=function(e){u(e)},j=c||d||m?null:(0,l.jsx)(v,{}),g=d?(0,l.jsx)(s.Z,{}):null,N=m?(0,l.jsx)(i.Z,{}):null,k=d||m||!c?null:(0,l.jsx)(b,{char:c});return(0,l.jsxs)("div",{className:"char-info",children:[j,g,N,k]})},j=t(9215),g=t(5705),N=t(6727),k=function(e){var n=(0,g.u6)().values;return(0,a.useEffect)((function(){e.setChar(null)}),[n]),null},Z=function(){var e=(0,a.useState)(null),n=(0,r.Z)(e,2),t=n[0],c=n[1],i=(0,o.Z)(),u=i.loading,h=i.error,d=i.clearError,m=i.getCharacterByName,f=function(e){c(e)},p=h?(0,l.jsx)("div",{className:"search__error",children:h}):null,v=u?(0,l.jsx)(s.Z,{size:"24px",margin:"25px auto 0 auto"}):null,b=t?t.length>0?(0,l.jsxs)("div",{className:"search__block",children:[(0,l.jsx)("div",{className:"search__label search__label_green",children:"There is! Visit page?"}),(0,l.jsx)(x.rU,{className:"search-btn button button_grey",to:"/character/".concat(t[0].id),tabIndex:0,children:"to page"})]}):(0,l.jsx)("div",{className:"search__error",children:"The character was not found. Check the name and try again"}):null;return(0,l.jsx)(g.J9,{initialValues:{name:""},validationSchema:N.Ry({name:N.Z_().required("This field is required")}),onSubmit:function(e){return function(e){d(),c(null),m(e).then(f)}(e.name)},children:(0,l.jsxs)(g.l0,{className:"search",children:[(0,l.jsx)("label",{htmlFor:"name",className:"search__label",children:"Or find a character by name:"}),(0,l.jsxs)("div",{className:"search__block",children:[(0,l.jsx)(g.gN,{id:"name",name:"name",type:"text",className:"search__input",placeholder:"Enter name"}),(0,l.jsx)("button",{type:"submit",className:"search-btn button button_main-color",children:"find"})]}),(0,l.jsx)(g.Bc,{className:"search__error",name:"name",component:"div"}),p,v,b,(0,l.jsx)(k,{setChar:c})]})})},y=t.p+"static/media/vision.067d4ae1936d64a577ce.png";function w(){var e=(0,a.useState)(null),n=(0,r.Z)(e,2),t=n[0],s=n[1];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(c.q,{children:[(0,l.jsx)("title",{children:"Marvel information portal"}),(0,l.jsx)("meta",{name:"description",content:"Marvel information portal"})]}),(0,l.jsx)(j.Z,{children:(0,l.jsx)(h,{})}),(0,l.jsxs)("div",{className:"App__page",children:[(0,l.jsx)(j.Z,{children:(0,l.jsx)(p,{onCharSelected:function(e){s(e)},charId:t})}),(0,l.jsxs)("div",{className:"App__descr",children:[(0,l.jsx)(j.Z,{children:(0,l.jsx)(_,{charId:t})}),(0,l.jsx)(Z,{})]})]}),(0,l.jsx)("img",{className:"bg-decoration",src:y,alt:"vision"})]})}w.displayName="MainPage"},8684:function(e,n,t){var r=t(184),a=function(e){return(0,r.jsx)("svg",{style:{margin:"".concat(e.margin),background:"none",display:"block"},width:e.size,height:e.size,viewBox:"0 0 128 128",space:"preserve",children:(0,r.jsx)("path",{fill:"#9f0013",d:"M64.4 16a49 49 0 0 0-50 48 51 51 0 0 0 50 52.2 53 53 0 0 0 54-52c-.7-48-45-55.7-45-55.7s45.3 3.8 49 55.6c.8 32-24.8 59.5-58 60.2-33 .8-61.4-25.7-62-60C1.3 29.8 28.8.6 64.3 0c0 0 8.5 0 8.7 8.4 0 8-8.6 7.6-8.6 7.6z",children:(0,r.jsx)("animateTransform",{attributeName:"transform",type:"rotate",from:"0 64 64",to:"360 64 64",dur:"1800ms",repeatCount:"indefinite"})})})};a.defaultProps={size:"64px",margin:"0 auto"},n.Z=a},4304:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(4165),a=t(5861),c=t(9439),s=t(2791),i=function(){var e=function(){var e=(0,s.useState)(!1),n=(0,c.Z)(e,2),t=n[0],i=n[1],o=(0,s.useState)(null),l=(0,c.Z)(o,2),u=l[0],h=l[1],d=(0,s.useCallback)(function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t,a,c,s,o,l=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>1&&void 0!==l[1]?l[1]:"GET",a=l.length>2&&void 0!==l[2]?l[2]:null,c=l.length>3&&void 0!==l[3]?l[3]:{"Content-Type":"application/json"},i(!0),e.prev=4,e.next=7,fetch(n,{method:t,body:a,headers:c});case 7:if((s=e.sent).ok){e.next=10;break}throw new Error("Could not fetch ".concat(n,", status: ").concat(s.status));case 10:return e.next=12,s.json();case 12:return o=e.sent,i(!1),e.abrupt("return",o);case 17:throw e.prev=17,e.t0=e.catch(4),i(!1),h(e.t0.message),e.t0;case 22:case"end":return e.stop()}}),e,null,[[4,17]])})));return function(n){return e.apply(this,arguments)}}(),[]);return{loading:t,error:u,request:d,clearError:(0,s.useCallback)((function(){h(null)}),[])}}(),n=e.loading,t=e.error,i=e.clearError,o=e.request,l="https://gateway.marvel.com:443/v1/public/",u="apikey=4f2080802c14be696101f97dc9e2bd5f",h=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n,t,a=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>0&&void 0!==a[0]?a[0]:210,e.next=3,o("".concat(l,"characters?limit=9&offset=").concat(n,"&").concat(u));case 3:return t=e.sent,e.abrupt("return",t.data.results.map(v));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("".concat(l,"characters?name=").concat(n,"&").concat(u));case 2:return t=e.sent,e.abrupt("return",t.data.results.map(v));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),m=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("".concat(l,"characters/").concat(n,"?").concat(u));case 2:return t=e.sent,e.abrupt("return",x(t.data.results[0]));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),f=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n,t,a=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>0&&void 0!==a[0]?a[0]:0,e.next=3,o("".concat(l,"comics?limit=8&offset=").concat(n,"&").concat(u));case 3:return t=e.sent,e.abrupt("return",t.data.results.map(b));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("".concat(l,"comics/").concat(n,"?").concat(u));case 2:return t=e.sent,e.abrupt("return",b(t.data.results[0]));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),x=function(e){return{id:e.id,name:e.name,description:e.description?"".concat(e.description.slice(0,210),"..."):"There is no description for this character",thumbnail:e.thumbnail.path+"."+e.thumbnail.extension,homepage:e.urls[0].url,wiki:e.urls[1].url,comics:e.comics.items}},v=function(e){return{id:e.id,name:e.name,thumbnail:e.thumbnail.path+"."+e.thumbnail.extension}},b=function(e){var n;return{id:e.id,title:e.title,description:e.description||"There is no description",thumbnail:e.thumbnail.path+"."+e.thumbnail.extension,pageCount:e.pageCount?"".concat(e.pageCount," pages"):"No information about the number of pages",language:(null===(n=e.textObjects[0])||void 0===n?void 0:n.language)||"en-us",price:e.prices[0].price?"".concat(e.prices[0].price,"$"):"not available"}};return{loading:n,error:t,clearError:i,getAllCharacters:h,getCharacter:m,getCharacterByName:d,getAllComics:f,getComic:p}}}}]);
//# sourceMappingURL=20.d3bb0027.chunk.js.map